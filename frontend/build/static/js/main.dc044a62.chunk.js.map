{"version":3,"sources":["components/ChatBox.jsx","components/LogInPage.jsx","components/Message.jsx","components/MessageBox.jsx","components/ChatPage.jsx","App.js","index.js"],"names":["fetchMessages","handleSubmit","e","preventDefault","name","document","getElementById","value","room","axios","post","then","res","sessionStorage","setItem","window","location","reload","LogInPage","props","method","id","onSubmit","TextField","sx","mb","fullWidth","variant","label","Button","mt","type","Message","className","Avatar","width","height","mr","data","user","message","io","on","ChatBox","useState","messages","setMessages","useEffect","messagesEndRef","useRef","current","scrollIntoView","behavior","scrollToBottom","getItem","map","ref","socket","emit","MessageBox","autoComplete","ml","size","Icon","ChatPage","App","ReactDOM","render"],"mappings":"qPAOIA,E,2ECOEC,EAAe,SAACC,GAClBA,EAAEC,iBACF,IAAMC,EAAOC,SAASC,eAAe,QAAQC,MACvCC,EAAOH,SAASC,eAAe,QAAQC,MAC7CE,IAAMC,KAAK,SAAU,CACjBN,KAAMA,EACNI,KAAMA,IACLG,MAAK,SAAAC,GACNC,eAAeC,QAAQ,OAAQV,GAC/BS,eAAeC,QAAQ,OAAQN,MAC9BG,MAAK,WACJI,OAAOC,SAASC,aAKXC,EA1BG,SAACC,GACf,OACI,uBAAMC,OAAO,OAAOC,GAAG,YAAYC,SAAU,SAAApB,GAAC,OAAID,EAAaC,IAA/D,UACI,cAACqB,EAAA,EAAD,CAAWC,GAAI,CAAEC,GAAI,GAAIC,UAAU,OAAOC,QAAQ,WAAWC,MAAM,OAAOP,GAAG,SAC7E,cAACE,EAAA,EAAD,CAAWG,UAAU,OAAOC,QAAQ,WAAWC,MAAM,OAAOP,GAAG,SAC/D,cAACQ,EAAA,EAAD,CAAQL,GAAI,CAAEM,GAAI,GAAKH,QAAQ,YAAYI,KAAK,SAAhD,sB,iBCIGC,G,OAVC,SAACb,GACb,OACI,sBAAKc,UAAU,UAAf,UACI,cAACC,EAAA,EAAD,CAAQD,UAAU,iBAAiBT,GAAI,CAACW,MAAM,GAAIC,OAAO,GAAIC,GAAG,GAAhE,SAAqElB,EAAMmB,KAAKC,KAAK,GAAKpB,EAAMmB,KAAKC,KAAK,KAC1G,4BAAIpB,EAAMmB,KAAKE,e,0BFDdC,IAAG,KAwCTC,GAAG,mBAAmB,WACzB1C,OAGW2C,MAzCC,SAACxB,GAEb,MAAgCyB,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KAEAC,qBAAU,WACN/C,MACD,IAEH,IAAMgD,EAAiBC,iBAAO,MAiB9B,OAXAF,qBAAU,YAJa,WAAO,IAAD,EACzB,UAAAC,EAAeE,eAAf,SAAwBC,eAAe,CAAEC,SAAU,WAInDC,KACD,CAACR,IAEJ7C,EAAgB,WACZS,IAAMC,KAAK,WAAY,CAACF,KAAMK,eAAeyC,QAAQ,UACpD3C,MAAK,SAAAC,GACFkC,EAAYlC,EAAI0B,UAKpB,sBAAKL,UAAU,WAAf,UAEYY,EAASU,KAAI,SAAAf,GAAO,OAChB,cAAC,EAAD,CAASF,KAAME,OAGvB,qBAAKgB,IAAKR,Q,SGpCtBS,G,OAAShB,IAAG,MAWVxC,EAAe,SAACC,GAClBA,EAAEC,iBACF,IAAMqC,EAAUnC,SAASC,eAAe,WAAWC,MACnDE,IAAMC,KAAK,WAAY,CACnB8B,QAASA,EACTD,KAAM1B,eAAeyC,QAAQ,QAC7B9C,KAAMK,eAAeyC,QAAQ,UAC5B3C,MAAK,WACFN,SAASC,eAAe,WAAWC,MAAQ,GAC3CkD,EAAOC,KAAK,eAKTC,EAvBI,SAACxC,GAChB,OACI,uBAAMC,OAAO,OAAOC,GAAG,cAAcC,SAAU,SAAApB,GAAC,OAAID,EAAaC,IAAjE,UACI,cAACqB,EAAA,EAAD,CAAWG,UAAU,OAAOkC,aAAa,MAAMjC,QAAQ,WAAWC,MAAM,UAAUP,GAAG,YACrF,cAACQ,EAAA,EAAD,CAAQL,GAAI,CAAEqC,GAAI,GAAKlC,QAAQ,YAAYmC,KAAK,QAAQ/B,KAAK,SAASE,UAAU,UAAhF,SAA0F,cAAC8B,EAAA,EAAD,yBCIvFC,G,OATE,SAAC7C,GACd,OACI,sBAAKc,UAAU,WAAf,UACI,cAAC,EAAD,IACA,cAAC,EAAD,SCDGgC,EALH,SAAC9C,GACT,OAAIN,eAAeyC,QAAQ,QAAgB,cAAC,EAAD,IAC/B,cAAC,EAAD,K,OCDhBY,IAASC,OACL,cAAC,EAAD,IACA9D,SAASC,eAAe,W","file":"static/js/main.dc044a62.chunk.js","sourcesContent":["import { useState, useEffect, useRef } from 'react'\r\nimport axios from 'axios'\r\nimport Message from './Message'\r\nimport \"../css/ChatBox.css\"\r\nimport io from 'socket.io-client'\r\n\r\nlet socket = io('/')\r\nlet fetchMessages;\r\n\r\nconst ChatBox = (props) => {\r\n\r\n    const [messages, setMessages] = useState([])\r\n\r\n    useEffect(() => {\r\n        fetchMessages()\r\n    }, [])\r\n\r\n    const messagesEndRef = useRef(null)\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n    }\r\n\r\n    useEffect(() => {\r\n        scrollToBottom()\r\n    }, [messages]) \r\n\r\n    fetchMessages = () => {\r\n        axios.post('messages', {room: sessionStorage.getItem(\"room\")})\r\n        .then(res => {\r\n            setMessages(res.data)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"messages\">\r\n                {\r\n                    messages.map(message =>\r\n                        <Message data={message} />\r\n                    )\r\n                }\r\n                <div ref={messagesEndRef} />\r\n            </div>  \r\n      )\r\n}\r\n\r\nsocket.on('messageReceived', () => {\r\n    fetchMessages()\r\n})\r\n\r\nexport default ChatBox","import { Button, TextField, Box, FormGroup } from \"@mui/material\"\r\nimport \"../css/LogInPage.css\"\r\nimport axios from 'axios'\r\n\r\nconst LogInPage = (props) => {\r\n    return (\r\n        <form method=\"POST\" id=\"loginform\" onSubmit={e => handleSubmit(e)}>\r\n            <TextField sx={{ mb: 2 }}fullWidth=\"true\" variant=\"outlined\" label=\"Name\" id=\"name\"></TextField>\r\n            <TextField fullWidth=\"true\" variant=\"outlined\" label=\"Room\" id=\"room\"></TextField>\r\n            <Button sx={{ mt: 3 }} variant=\"contained\" type=\"submit\">Join</Button>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const name = document.getElementById(\"name\").value\r\n    const room = document.getElementById(\"room\").value\r\n    axios.post('/login', {\r\n        name: name,\r\n        room: room\r\n      }).then(res => {\r\n        sessionStorage.setItem('user', name)\r\n        sessionStorage.setItem('room', room)\r\n      }).then(() => {\r\n          window.location.reload()\r\n      })\r\n    \r\n}\r\n\r\nexport default LogInPage","import { Avatar } from \"@mui/material\"\r\nimport \"../css/Message.css\"\r\n\r\nconst Message = (props) => {\r\n    return (\r\n        <div className=\"message\">\r\n            <Avatar className=\"message-avatar\" sx={{width:35, height:35, mr:2}}>{props.data.user[0] + props.data.user[1]}</Avatar>\r\n            <p>{props.data.message}</p>\r\n        </div>\r\n    );    \r\n}\r\n\r\n\r\nexport default Message","import { Button, TextField, Icon } from \"@mui/material\"\r\nimport \"../css/MessageBox.css\"\r\nimport axios from 'axios'\r\nimport io from 'socket.io-client'\r\n\r\nlet socket = io('/')\r\n\r\nconst MessageBox = (props) => {\r\n    return (\r\n        <form method=\"POST\" id=\"messageForm\" onSubmit={e => handleSubmit(e)}>\r\n            <TextField fullWidth=\"true\" autoComplete=\"off\" variant=\"outlined\" label=\"Message\" id=\"message\"></TextField>\r\n            <Button sx={{ ml: 2 }} variant=\"contained\" size=\"small\" type=\"submit\" className=\"sendBtn\"><Icon>send</Icon></Button>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const message = document.getElementById(\"message\").value\r\n    axios.post('/message', {\r\n        message: message,\r\n        user: sessionStorage.getItem(\"user\"),\r\n        room: sessionStorage.getItem(\"room\")\r\n      }).then(() => {\r\n            document.getElementById('message').value = \"\";\r\n            socket.emit('message')\r\n      })\r\n    \r\n}\r\n\r\nexport default MessageBox","import ChatBox from \"./ChatBox\"\r\nimport MessageBox from \"./MessageBox\"\r\nimport \"../css/ChatPage.css\"\r\n\r\n\r\n\r\nconst ChatPage = (props) => {\r\n    return (\r\n        <div className=\"chatPage\">\r\n            <ChatBox />\r\n            <MessageBox />\r\n        </div>\r\n    );             \r\n}\r\n\r\nexport default ChatPage","import { React } from 'react'\r\nimport LogInPage from './components/LogInPage';\r\nimport ChatPage from './components/ChatPage'\r\n\r\nconst App = (props) => {\r\n    if (sessionStorage.getItem(\"user\")) return <ChatPage />\r\n    else return <LogInPage />;\r\n}\r\n\r\nexport default App;","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from \"./App.js\"\nimport \"./css/index.css\"\n\nReactDOM.render( \n    <App />,\n    document.getElementById(\"root\")\n);"],"sourceRoot":""}